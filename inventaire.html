<!doctype html>

<html lang="en" class="no-js">
<head>
<title>Deem Déménagement – Inventaire</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Lato:300,700,900%7CSource+Sans+Pro:300,400,600,700,900%7CRaleway:300,700,900%7CMontserrat%7CAlegreya:300,700,900'>
<link href="../maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="css/stroke-gap.css" media="screen">
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" media="screen">
<link rel="stylesheet" type="text/css" href="css/jquery.bxslider.css" media="screen">
<link rel="stylesheet" type="text/css" href="css/font-awesome.css" media="screen">
<link rel="stylesheet" type="text/css" href="css/animate.css" media="screen">
<link rel="stylesheet" type="text/css" href="css/owl.theme.css" media="screen">
<link rel="stylesheet" type="text/css" href="css/owl.carousel.css" media="screen">
<!-- REVOLUTION BANNER CSS SETTINGS -->
<link rel="stylesheet" type="text/css" href="css/settings.css" media="screen"/>
<link rel="stylesheet" type="text/css" href="css/style.css" media="screen">
<link href="https://kabi-logistique.com/css/inventaire/jquery-ui.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="css/custom.css" media="screen">
</head>
<body class="style-2 style-5">

<!-- Container -->
<div id="container">
  <!-- Header
		    ================================================== -->
        <header class="clearfix">
          <nav class="navbar navbar-default " role="navigation">
            <div class="top-line">
              <div class="container">
                <div class="row">
                  <div class="col-md-7 pull-right text-right">
                    <p> <span><span class="icon icon-Phone2"></span>1234 - 5678 - 9012</span> <span><span class="icon icon-Mail"></span>contact@deem-demenagement.com</span> </p>
                  </div>
                  <!--<div class="col-md-5">
                  <ul class="social-icons">
                  <li><a class="facebook" href="#"><i class="fa fa-facebook"></i></a></li>
                  <li><a class="twitter" href="#"><i class="fa fa-twitter"></i></a></li>
                  <li><a class="rss" href="#"><i class="fa fa-rss"></i></a></li>
                  <li><a class="google" href="#"><i class="fa fa-google-plus"></i></a></li>
                  <li><a class="linkedin" href="#"><i class="fa fa-linkedin"></i></a></li>
                  <li><a class="pinterest" href="#"><i class="fa fa-pinterest"></i></a></li>
                </ul>
              </div>-->
            </div></div>
          </div>
          <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
              <a class="navbar-brand" href="index.html"><img src="https://kabi-logistique.com/images/logo-deem2.jpg" width="150px" alt=""></a> </div>

              <!-- Collect the nav links, forms, and other content for toggling -->
              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                  <li><a  class="active" href="index.html">Accueil</a> </li>
                  <li class="drop"><a href="#">Services</a>
                    <ul class="dropdown">
                      <li><a href="https://kabi-logistique.com/deem-particulier.html">Deem pour particulier</a></li>
                      <li><a href="https://kabi-logistique.com/deem-entreprise.html">Deem pour entreprise</a></li>
                      <li><a href="https://kabi-logistique.com/deem-international.html">Deem international</a></li>
                    </ul>
                  </li>
                  <li><a href="about.html">Société</a> </li>
                  <li><a href="inventaire.html">Calculez mon inventaire</a> </li>
                  <li><a href="payer-un-demenagement.html">Payer un déménagement</a></li>
                  <li><a href="contact.html">Contact</a></li>
                </ul>
              </div>
              <!-- /.navbar-collapse -->
            </div>
            <!-- /.container -->
          </nav>
        </header>
  <!-- End Header -->

  <!-- page-banner-section
			================================================== -->
<div id="inventaire">
  <section class="page-banner-section">
    <div class="text-center">
      <div class="row">
        <div class="col-md-12">
          <h2>Inventaire</h2>
        </div>
      </div>
    </div>
  </section>
</div>
  <!-- End page-banner section -->

  <!-- about section
			================================================== -->
  <section class="about-box">
    <div class="container">
      <div class="row">

        <div class="col-md-12 mt-50">
          <div class="container margin_60">
            <div class="row">
              <div class="col-md-9" id="main-content">
                <div class="row">
                  <div class="col-md-12">
                    <div class="sec-title style-2 mb-20">
                      <h2 class="">Calculer  <span> votre volume</span> </h2>
                    </div>

                  </div>
                </div>
                <div id="myModal" class="modal fade" role="dialog">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">Complément d'information</h5>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                      </div>
                      <div class="modal-body" style="color:black">
                        <form id="info">
                          <div class="row">
                            <div class="col-md-6">
                              <div class="form-group">
                                <label>Nom</label>
                                <input class="form-control" type="text" id="nom" placeholder="Merci d'entrer votre nom" />
                              </div>
                            </div>
                            <div class="col-md-6">
                              <div class="form-group">
                                <label>Prenom</label>
                                <input class="form-control" type="text" id="prenom" placeholder="Merci d'entrer votre prenom" />
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-6">
                              <div class="form-group">
                                <label>Téléphone</label>
                                <input class="form-control" type="text" id="phone" placeholder="Merci d'entrer votre téléphone" />
                              </div>
                            </div>
                            <div class="col-md-6">
                              <div class="form-group">
                                <label>Email</label>
                                <input class="form-control" type="text" id="email" placeholder="Merci d'entrer votre email" />
                              </div>
                            </div>
                          </div>
                        </form>
                      </div>
                      <div class="modal-footer">
                        <div class="row">
                          <div class="col-sm-offset-7 col-sm-5">
                            <button type="button" class="btn btn-default" id="btn-save" onclick="postInventaire()">Calculer</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row" style="margin-top:10px">
                  <div class="col-sm-6 col-sm-offset-3">
                    <input type="text" class="quicksearch form-control" style="font-size: 14px;" placeholder="Recherchez vos éléments" />
                  </div>
                </div>
                <div class="'row">
                  <div class="col-md-12" style="background-color: whitesmoke;margin-top:20px; padding-top: 10px; padding-bottom: 10px;">
                    <div class="grid" id="tabs">


                    </div>
                  </div>
                </div>
                <!-- End row -->

                <!-- End row -->
              </div>
              <!-- End col-md-9 -->
              <div class="col-md-3" style=" margin-top: 12%;">
                <div class="row">
                  <div style="margin-top: 0px;">
                    <div>
                      <article class="bloc-lead" style="padding: 0;">
                        <div id="tabs2">
                          <ul>
                            <li><a href="#tabs-0">Vos éléments</a></li>
                          </ul>
                          <div id="tabs-0" style="max-height:441px;overflow:  auto;">
                          </div>
                        </div>

                      </article>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div style="margin-top: 0px;">
                    <div>
                      <article class="bloc-lead">
                        <form id="form-lead" class="form-box">
                          <h3 class="titre"><span class="title-h1 fond title-bloc-lead">Votre volume</span><span class="title-h2"></span></h3>
                          <section class="form-bg ">
                            <fieldset>
                              <div>
                                <div class="bloc-one" style="text-align:center;">
                                  <h2 class="title-h2" id="total-volume"></h2>
                                </div>
                              </div>
                            </fieldset>
                          </section>
                          <section class="cta">
                            <button class="btn btn-theme button-one nextBtn2" type="button" data-toggle="modal" data-target="#myModal">Calculer !</button>
                          </section>
                        </form>
                      </article>
                    </div>
                  </div>
                </div>

              </div>
              <!-- End col-md-3 -->
            </div>
          </div>

        </div>

      </div>
    </div>
  </section>

  <section class="pad-tb-40 callto-action about-section">
    <div class="container">
      <div class="row">
        <!-- Column -->
        <div class="col-sm-12">
          <div class="callto-action text-center">
            <h3 class=""><span class="call-title-text"><span class="call-title-text">Organisez votre déménagement dès maintenant </span></span><a href="#" class="button-one">Demande de devis</a></h3>
          </div>
        </div>
        <!-- Column -->
      </div>
      <!-- row -->
    </div>
    <!-- Container -->
  </section>
  <!-- footer
			================================================== -->
      <footer>
        <div class="up-footer">
          <div class="container">
            <div class="row">
              <div class="col-md-3">
                <div class="footer-widget">
                  <h2>Deem Déménagement</h2>
                  <p>Optez pour une expérience de déménagement sans stress et sans soucis. Avec notre équipe expérimentée, notre matériel de déménagement de qualité et notre engagement envers la satisfaction de nos clients</p>
                    <!--  <ul class="social-links social-links_mod-a list-inline">
                    <li><a target="_blank" href="https://twitter.com/"><i class="icons fa fa-twitter"></i></a></li>
                    <li><a target="_blank" href="https://www.facebook.com/"><i class="icons fa fa-facebook"></i></a></li>
                    <li><a target="_blank" href="https://www.linkedin.com/"><i class="icons fa fa-linkedin"></i></a></li>
                    <li><a target="_blank" href="https://www.google.com/"><i class="icons fa fa-google-plus"></i></a></li>
                    <li><a target="_blank" href="https://www.instagram.com/"><i class="icons fa fa-instagram"></i></a></li>
                  </ul>-->
                </div>
              </div>
              <div class="col-md-3">
                <div class="footer-widget">
                  <h2>Nos services</h2>
                  <ul class="link-list">
                    <li><a href="https://kabi-logistique.com/deem-particulier.html">Deem pour particulier</a></li>
                    <li><a href="https://kabi-logistique.com/deem-entreprise.html">Deem pour entreprise</a></li>
                    <li><a href="https://kabi-logistique.com/deem-international.html">Deem international</a></li>
                  </ul>
                </div>
              </div>
              <div class="col-md-3">
                <div class="footer-widget">
                  <h2>Outils</h2>
                  <ul class="link-list">
                    <li><a href="inventaire.html">Calculez mon inventaire</a></li>
                    <li><a href="payer-un-demenagement.html">Payer un déménagement</a></li>
                  </ul>
                </div>
              </div>
              <div class="col-md-3">
                <div class="footer-widget info-widget">
                  <h2>Info</h2>
                  <p class="first-par">Vous pouvez nous contacter pendant les heures de travail.</p>
                  <p><span>Tel: </span> 1234 - 5678 - 9012</p>
                  <p><span>Email: </span> contact@deem-demenagement.com</p>
                  <p><span>Heures de travail: </span> 8:00 - 17:00</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class=" copyright">
          <div class="container ">
            <div class="pull-left">
              <p class=""> &copy; Copyright Deem Déménagement. Tous droits réservés. </p>
            </div>
            <div class="pull-right">

            </div>
          </div>
        </div>
      </footer>
  <!-- End footer -->
</div>
<!-- End Container -->

<!--<script type="text/javascript" src="js/jquery.min.js"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<!-- Add fancyBox main JS and CSS files -->
<link rel="stylesheet" type="text/css" href="js/jquery.fancybox.css" media="screen">
<script src="js/jquery.fancybox.pack.js"></script>
<script type="text/javascript" src="js/jquery.migrate.js"></script>
<script type="text/javascript" src="js/jquery.bxslider.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/jquery.imagesloaded.min.js"></script>
<script type="text/javascript" src="js/jquery.isotope.min.js"></script>
<script type="text/javascript" src="js/plugins-scroll.js"></script>
<script type="text/javascript" src="js/owl.carousel.min.js"></script>
<script type="text/javascript" src="js/jquery.countTo.js"></script>


<script src="https://kabi-logistique.com/js/inventaire/jquery.scrollbar.js"></script>
<script src="https://kabi-logistique.com/js/inventaire/jquery-ui.js"></script>
<!-- SLIDER REVOLUTION 4.x SCRIPTS  -->

<script type="text/javascript" src="js/owl.carousel.min.js"></script>
<script type="text/javascript" src="js/script.js"></script>
<script>
var items;
$.ajax({
url: 'https://api.get-move.com/v1/lad/items',
method: 'GET',
dataType: 'json',
contentType: 'application/json',
success: function (data) {
  items = data;
  data.forEach(function (item) {

    $('#tabs').append(
      '<a  onclick="myScript(' + item.id + ')" data-item-id="' + item.id + '"><div class="col-md-2 col-xs-6 element-item" id="'+item.id+'" style="margin-top:20px;min-height:250px; cursor:pointer;">' +
      '<div>' +
      '<div  style="min-height:150px;">' +
      '<img class="svg-size-icons" src="' + item.icon_url + '" alt="">' +
      '</div>' +
      '<div>' +
      '<h4 >' +
      '<p style="color: #1c1c1c;" onclick="myScript(' + item.id + ')">' + item.name_fr + '</p>' +
      '</h4>' +
      '</div>' +
      '   </div>' +
      '</div></a>'
    );


  });
  init2();


},
error: function (ex) {
  console.log(ex);
}
});


function init2() {
var qsRegex;
var $grid = $('.grid').isotope({
  itemSelector: '.element-item',
  layoutMode: 'fitRows',
  filter: function () {
    return qsRegex ? $(this).text().match(qsRegex) : true;
  }
});

var $quicksearch = $('.quicksearch').keyup(debounce(function () {
  qsRegex = new RegExp($quicksearch.val(), 'gi');
  $grid.isotope();
  setTimeout(function () {
    $( "#tabs" ).css({'height':'800px','overflow-x':'hidden','overflow-y':'auto'});
  },100)
}, 200));
$("#tabs2").tabs();
$( "#tabs" ).css({'height':'800px','overflow-x':'hidden','overflow-y':'auto'});
if(localStorage.inventaire){
  getInventaireLocal();
}

}

function debounce(fn, threshold) {
var timeout;
threshold = threshold || 100;
return function debounced() {
  clearTimeout(timeout);
  var args = arguments;
  var _this = this;

  function delayed() {
    fn.apply(_this, args);
  }

  timeout = setTimeout(delayed, threshold);
};
}

function myScript(id) {
var tab =$("#tabs2").tabs("option", "active");

items.forEach(function (item) {
  if (item.id == id) {
    $('#tabs-' + tab).prepend(
      '<div class=" gen-id-item-'+item.id+'">' +
      '<div class="row">'+
      '<div class="col-xs-2">' +
      '<img class="svg-size-icons" src="' + item.icon_url + '" alt="" style="width: 50px;">' +
      '</div>' +
      '<div class=" col-xs-6">' +
      '<p>' + item.name_fr + '</p>' +
      '</div>' +
      '<div class="col-xs-4">' +
      '<div class="row">'+
      '<div class="col-xs-2">'+
      '<p class="item-sup" onclick="removeItemQuan(' + item.id + ')">-</p>' +
      '</div>'+
      '<div class="col-xs-3">'+
      '<p  data-volume="' + item.volume + '"  data-item-name="'+item.name_fr+'" data-item-id="'+item.id+'" class=" item-elt id-item-' + item.id + '" style=" text-align:  center;">1</p>' +
      '</div>'+
      '<div class="col-xs-2">'+
      '<p class="item-add" onclick="addItemQuan(' + item.id + ')" >+</p>' +
      '</div>' +
      '</div>' +
      '</div>' +
      '</div>' +
      '<hr>'+
      '</div>'

    );


  }
});
$('a[data-item-id="'+id+'"]').prop("onclick", null).off("click");
$('#'+id).css("border-bottom", "2px solid #f8c749");
getVolume();

}

function addItemQuan(id){
$('.id-item-'+id).text(parseInt($('.id-item-'+id).text())+1);
getVolume()

}

function removeItemQuan(id) {
var val = parseInt($('.id-item-' + id).text());
if (val === 0) {
  $('.gen-id-item-' + id).remove();
  getVolume()
} else {
  $('.id-item-' + id).text(parseInt($('.id-item-' + id).text()) - 1);
  getVolume()
}

}

function getElt(){
var $elts = $('.item-elt');
var elt=[]
for(var i = 0; i< $elts.length;i++){
  var result = {};
  result['id']= parseInt($elts[i].dataset.itemId);
  result['name']= $elts[i].dataset.itemName;
  result['quantite']= parseInt($elts[i].textContent);
  result['volume']= parseFloat($elts[i].dataset.volume);
  elt[i] = result;

}
return elt;
}


function getVolume() {
var items =getElt();
var volume = 0;
for (i = 0; i < items.length; i++) {
  var n = items[i]['volume'] * items[i]['quantite'];
  volume += n;
}
return Math.ceil(volume);

}

function postInventaire(){
var toto = JSON.stringify(getElt())
if(toto.length>2){
  var form = new FormData();
  form.append("inventaire", toto);
  form.append("source", document.domain);
  form.append("nom", $('#nom').val());
  form.append("prenom", $('#prenom').val());
  form.append("phone", $('#phone').val());
  form.append("email", $('#email').val());
  var settings = {
    "async": true,
    "crossDomain": true,
    "url": "https://api.get-move.com/v1/inventairelead/lead",
    "method": "POST",
    "processData": false,
    "contentType": false,
    "mimeType": "multipart/form-data",
    "data": form
  }
  $.ajax(settings).done(function (response) {
    var res = JSON.parse(response);
    if(res.message == 'success'){
      localStorage.inventaire = JSON.stringify(getElt());
      localStorage.ref = res.id_lead;
      $('#btn-save').remove();
    }
    location = `/merci_inventaire.html?nom=${$('#nom').val()}&volume=${getVolume()}`
  });
}
}

function getInventaireLocal(){
  var inventaire = JSON.parse(localStorage.inventaire)
  inventaire.forEach(function(elt){
    myScript(elt.id);
  })
}

$.urlParam = function(name){
  var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
  if (results==null){
    return null;
  }
  else{
    return decodeURI(results[1]) || 0;
  }
}
if(!$.urlParam('ref') && localStorage.ref){
  document.location.href="https://kabi-logistique.com/inventaire.html?ref="+localStorage.ref
}

$(window).on('resize', function(){
  setTimeout(function () {
    $( "#tabs" ).css({'height':'800px','overflow':'auto'});
  },200)
});

</script>
</body>
</html>
